/*! RÃ©volution framework */
(function(){var n=this,t=n._,e=Array.prototype,r=Object.prototype,i=Function.prototype,u=e.push,a=e.slice,o=e.concat,s=r.toString,l=r.hasOwnProperty,c=Array.isArray,f=Object.keys,h=i.bind,p=function(n){return n instanceof p?n:this instanceof p?void(this._wrapped=n):new p(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):n._=p,p.VERSION="1.7.0";var d=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,i){return n.call(t,e,r,i)};case 4:return function(e,r,i,u){return n.call(t,e,r,i,u)}}return function(){return n.apply(t,arguments)}};p.iteratee=function(n,t,e){return null==n?p.identity:p.isFunction(n)?d(n,t,e):p.isObject(n)?p.matches(n):p.property(n)},p.each=p.forEach=function(n,t,e){if(null==n)return n;t=d(t,e);var r,i=n.length;if(i===+i)for(r=0;i>r;r++)t(n[r],r,n);else{var u=p.keys(n);for(r=0,i=u.length;i>r;r++)t(n[u[r]],u[r],n)}return n},p.map=p.collect=function(n,t,e){if(null==n)return[];t=p.iteratee(t,e);for(var r,i=n.length!==+n.length&&p.keys(n),u=(i||n).length,a=Array(u),o=0;u>o;o++)r=i?i[o]:o,a[o]=t(n[r],r,n);return a};var g="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(n,t,e,r){null==n&&(n=[]),t=d(t,r,4);var i,u=n.length!==+n.length&&p.keys(n),a=(u||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(g);e=n[u?u[o++]:o++]}for(;a>o;o++)i=u?u[o]:o,e=t(e,n[i],i,n);return e},p.reduceRight=p.foldr=function(n,t,e,r){null==n&&(n=[]),t=d(t,r,4);var i,u=n.length!==+n.length&&p.keys(n),a=(u||n).length;if(arguments.length<3){if(!a)throw new TypeError(g);e=n[u?u[--a]:--a]}for(;a--;)i=u?u[a]:a,e=t(e,n[i],i,n);return e},p.find=p.detect=function(n,t,e){var r;return t=p.iteratee(t,e),p.some(n,function(n,e,i){return t(n,e,i)?(r=n,!0):void 0}),r},p.filter=p.select=function(n,t,e){var r=[];return null==n?r:(t=p.iteratee(t,e),p.each(n,function(n,e,i){t(n,e,i)&&r.push(n)}),r)},p.reject=function(n,t,e){return p.filter(n,p.negate(p.iteratee(t)),e)},p.every=p.all=function(n,t,e){if(null==n)return!0;t=p.iteratee(t,e);var r,i,u=n.length!==+n.length&&p.keys(n),a=(u||n).length;for(r=0;a>r;r++)if(i=u?u[r]:r,!t(n[i],i,n))return!1;return!0},p.some=p.any=function(n,t,e){if(null==n)return!1;t=p.iteratee(t,e);var r,i,u=n.length!==+n.length&&p.keys(n),a=(u||n).length;for(r=0;a>r;r++)if(i=u?u[r]:r,t(n[i],i,n))return!0;return!1},p.contains=p.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=p.values(n)),p.indexOf(n,t)>=0)},p.invoke=function(n,t){var e=a.call(arguments,2),r=p.isFunction(t);return p.map(n,function(n){return(r?t:n[t]).apply(n,e)})},p.pluck=function(n,t){return p.map(n,p.property(t))},p.where=function(n,t){return p.filter(n,p.matches(t))},p.findWhere=function(n,t){return p.find(n,p.matches(t))},p.max=function(n,t,e){var r,i,u=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:p.values(n);for(var o=0,s=n.length;s>o;o++)r=n[o],r>u&&(u=r)}else t=p.iteratee(t,e),p.each(n,function(n,e,r){i=t(n,e,r),(i>a||i===-1/0&&u===-1/0)&&(u=n,a=i)});return u},p.min=function(n,t,e){var r,i,u=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:p.values(n);for(var o=0,s=n.length;s>o;o++)r=n[o],u>r&&(u=r)}else t=p.iteratee(t,e),p.each(n,function(n,e,r){i=t(n,e,r),(a>i||1/0===i&&1/0===u)&&(u=n,a=i)});return u},p.shuffle=function(n){for(var t,e=n&&n.length===+n.length?n:p.values(n),r=e.length,i=Array(r),u=0;r>u;u++)t=p.random(0,u),t!==u&&(i[u]=i[t]),i[t]=e[u];return i},p.sample=function(n,t,e){return null==t||e?(n.length!==+n.length&&(n=p.values(n)),n[p.random(n.length-1)]):p.shuffle(n).slice(0,Math.max(0,t))},p.sortBy=function(n,t,e){return t=p.iteratee(t,e),p.pluck(p.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return n.index-t.index}),"value")};var v=function(n){return function(t,e,r){var i={};return e=p.iteratee(e,r),p.each(t,function(r,u){var a=e(r,u,t);n(i,r,a)}),i}};p.groupBy=v(function(n,t,e){p.has(n,e)?n[e].push(t):n[e]=[t]}),p.indexBy=v(function(n,t,e){n[e]=t}),p.countBy=v(function(n,t,e){p.has(n,e)?n[e]++:n[e]=1}),p.sortedIndex=function(n,t,e,r){e=p.iteratee(e,r,1);for(var i=e(t),u=0,a=n.length;a>u;){var o=u+a>>>1;e(n[o])<i?u=o+1:a=o}return u},p.toArray=function(n){return n?p.isArray(n)?a.call(n):n.length===+n.length?p.map(n,p.identity):p.values(n):[]},p.size=function(n){return null==n?0:n.length===+n.length?n.length:p.keys(n).length},p.partition=function(n,t,e){t=p.iteratee(t,e);var r=[],i=[];return p.each(n,function(n,e,u){(t(n,e,u)?r:i).push(n)}),[r,i]},p.first=p.head=p.take=function(n,t,e){return null==n?void 0:null==t||e?n[0]:0>t?[]:a.call(n,0,t)},p.initial=function(n,t,e){return a.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},p.last=function(n,t,e){return null==n?void 0:null==t||e?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},p.rest=p.tail=p.drop=function(n,t,e){return a.call(n,null==t||e?1:t)},p.compact=function(n){return p.filter(n,p.identity)};var _=function(n,t,e,r){if(t&&p.every(n,p.isArray))return o.apply(r,n);for(var i=0,a=n.length;a>i;i++){var s=n[i];p.isArray(s)||p.isArguments(s)?t?u.apply(r,s):_(s,t,e,r):e||r.push(s)}return r};p.flatten=function(n,t){return _(n,t,!1,[])},p.without=function(n){return p.difference(n,a.call(arguments,1))},p.uniq=p.unique=function(n,t,e,r){if(null==n)return[];p.isBoolean(t)||(r=e,e=t,t=!1),null!=e&&(e=p.iteratee(e,r));for(var i=[],u=[],a=0,o=n.length;o>a;a++){var s=n[a];if(t)a&&u===s||i.push(s),u=s;else if(e){var l=e(s,a,n);p.indexOf(u,l)<0&&(u.push(l),i.push(s))}else p.indexOf(i,s)<0&&i.push(s)}return i},p.union=function(){return p.uniq(_(arguments,!0,!0,[]))},p.intersection=function(n){if(null==n)return[];for(var t=[],e=arguments.length,r=0,i=n.length;i>r;r++){var u=n[r];if(!p.contains(t,u)){for(var a=1;e>a&&p.contains(arguments[a],u);a++);a===e&&t.push(u)}}return t},p.difference=function(n){var t=_(a.call(arguments,1),!0,!0,[]);return p.filter(n,function(n){return!p.contains(t,n)})},p.zip=function(n){if(null==n)return[];for(var t=p.max(arguments,"length").length,e=Array(t),r=0;t>r;r++)e[r]=p.pluck(arguments,r);return e},p.object=function(n,t){if(null==n)return{};for(var e={},r=0,i=n.length;i>r;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},p.indexOf=function(n,t,e){if(null==n)return-1;var r=0,i=n.length;if(e){if("number"!=typeof e)return r=p.sortedIndex(n,t),n[r]===t?r:-1;r=0>e?Math.max(0,i+e):e}for(;i>r;r++)if(n[r]===t)return r;return-1},p.lastIndexOf=function(n,t,e){if(null==n)return-1;var r=n.length;for("number"==typeof e&&(r=0>e?r+e+1:Math.min(r,e+1));--r>=0;)if(n[r]===t)return r;return-1},p.range=function(n,t,e){arguments.length<=1&&(t=n||0,n=0),e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),u=0;r>u;u++,n+=e)i[u]=n;return i};var m=function(){};p.bind=function(n,t){var e,r;if(h&&n.bind===h)return h.apply(n,a.call(arguments,1));if(!p.isFunction(n))throw new TypeError("Bind must be called on a function");return e=a.call(arguments,2),r=function(){if(!(this instanceof r))return n.apply(t,e.concat(a.call(arguments)));m.prototype=n.prototype;var i=new m;m.prototype=null;var u=n.apply(i,e.concat(a.call(arguments)));return p.isObject(u)?u:i}},p.partial=function(n){var t=a.call(arguments,1);return function(){for(var e=0,r=t.slice(),i=0,u=r.length;u>i;i++)r[i]===p&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return n.apply(this,r)}},p.bindAll=function(n){var t,e,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)e=arguments[t],n[e]=p.bind(n[e],n);return n},p.memoize=function(n,t){var e=function(r){var i=e.cache,u=t?t.apply(this,arguments):r;return p.has(i,u)||(i[u]=n.apply(this,arguments)),i[u]};return e.cache={},e},p.delay=function(n,t){var e=a.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},p.defer=function(n){return p.delay.apply(p,[n,1].concat(a.call(arguments,1)))},p.throttle=function(n,t,e){var r,i,u,a=null,o=0;e||(e={});var s=function(){o=e.leading===!1?0:p.now(),a=null,u=n.apply(r,i),a||(r=i=null)};return function(){var l=p.now();o||e.leading!==!1||(o=l);var c=t-(l-o);return r=this,i=arguments,0>=c||c>t?(clearTimeout(a),a=null,o=l,u=n.apply(r,i),a||(r=i=null)):a||e.trailing===!1||(a=setTimeout(s,c)),u}},p.debounce=function(n,t,e){var r,i,u,a,o,s=function(){var l=p.now()-a;t>l&&l>0?r=setTimeout(s,t-l):(r=null,e||(o=n.apply(u,i),r||(u=i=null)))};return function(){u=this,i=arguments,a=p.now();var l=e&&!r;return r||(r=setTimeout(s,t)),l&&(o=n.apply(u,i),u=i=null),o}},p.wrap=function(n,t){return p.partial(t,n)},p.negate=function(n){return function(){return!n.apply(this,arguments)}},p.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},p.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},p.before=function(n,t){var e;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}},p.once=p.partial(p.before,2),p.keys=function(n){if(!p.isObject(n))return[];if(f)return f(n);var t=[];for(var e in n)p.has(n,e)&&t.push(e);return t},p.values=function(n){for(var t=p.keys(n),e=t.length,r=Array(e),i=0;e>i;i++)r[i]=n[t[i]];return r},p.pairs=function(n){for(var t=p.keys(n),e=t.length,r=Array(e),i=0;e>i;i++)r[i]=[t[i],n[t[i]]];return r},p.invert=function(n){for(var t={},e=p.keys(n),r=0,i=e.length;i>r;r++)t[n[e[r]]]=e[r];return t},p.functions=p.methods=function(n){var t=[];for(var e in n)p.isFunction(n[e])&&t.push(e);return t.sort()},p.extend=function(n){if(!p.isObject(n))return n;for(var t,e,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(e in t)l.call(t,e)&&(n[e]=t[e])}return n},p.pick=function(n,t,e){var r,i={};if(null==n)return i;if(p.isFunction(t)){t=d(t,e);for(r in n){var u=n[r];t(u,r,n)&&(i[r]=u)}}else{var s=o.apply([],a.call(arguments,1));n=new Object(n);for(var l=0,c=s.length;c>l;l++)r=s[l],r in n&&(i[r]=n[r])}return i},p.omit=function(n,t,e){if(p.isFunction(t))t=p.negate(t);else{var r=p.map(o.apply([],a.call(arguments,1)),String);t=function(n,t){return!p.contains(r,t)}}return p.pick(n,t,e)},p.defaults=function(n){if(!p.isObject(n))return n;for(var t=1,e=arguments.length;e>t;t++){var r=arguments[t];for(var i in r)void 0===n[i]&&(n[i]=r[i])}return n},p.clone=function(n){return p.isObject(n)?p.isArray(n)?n.slice():p.extend({},n):n},p.tap=function(n,t){return t(n),n};var y=function(n,t,e,r){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof p&&(n=n._wrapped),t instanceof p&&(t=t._wrapped);var i=s.call(n);if(i!==s.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=e.length;u--;)if(e[u]===n)return r[u]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(o)&&o instanceof o))return!1;e.push(n),r.push(t);var l,c;if("[object Array]"===i){if(l=n.length,c=l===t.length)for(;l--&&(c=y(n[l],t[l],e,r)););}else{var f,h=p.keys(n);if(l=h.length,c=p.keys(t).length===l)for(;l--&&(f=h[l],c=p.has(t,f)&&y(n[f],t[f],e,r)););}return e.pop(),r.pop(),c};p.isEqual=function(n,t){return y(n,t,[],[])},p.isEmpty=function(n){if(null==n)return!0;if(p.isArray(n)||p.isString(n)||p.isArguments(n))return 0===n.length;for(var t in n)if(p.has(n,t))return!1;return!0},p.isElement=function(n){return!(!n||1!==n.nodeType)},p.isArray=c||function(n){return"[object Array]"===s.call(n)},p.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){p["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),p.isArguments(arguments)||(p.isArguments=function(n){return p.has(n,"callee")}),"function"!=typeof/./&&(p.isFunction=function(n){return"function"==typeof n||!1}),p.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},p.isNaN=function(n){return p.isNumber(n)&&n!==+n},p.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},p.isNull=function(n){return null===n},p.isUndefined=function(n){return void 0===n},p.has=function(n,t){return null!=n&&l.call(n,t)},p.noConflict=function(){return n._=t,this},p.identity=function(n){return n},p.constant=function(n){return function(){return n}},p.noop=function(){},p.property=function(n){return function(t){return t[n]}},p.matches=function(n){var t=p.pairs(n),e=t.length;return function(n){if(null==n)return!e;n=new Object(n);for(var r=0;e>r;r++){var i=t[r],u=i[0];if(i[1]!==n[u]||!(u in n))return!1}return!0}},p.times=function(n,t,e){var r=Array(Math.max(0,n));t=d(t,e,1);for(var i=0;n>i;i++)r[i]=t(i);return r},p.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},p.now=Date.now||function(){return(new Date).getTime()};var b={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=p.invert(b),E=function(n){var t=function(t){return n[t]},e="(?:"+p.keys(n).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,t):n}};p.escape=E(b),p.unescape=E(w),p.result=function(n,t){if(null==n)return void 0;var e=n[t];return p.isFunction(e)?n[t]():e};var N=0;p.uniqueId=function(n){var t=++N+"";return n?n+t:t},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,k=function(n){return"\\"+A[n]};p.template=function(n,t,e){!t&&e&&(t=e),t=p.defaults({},t,p.templateSettings);var r=RegExp([(t.escape||x).source,(t.interpolate||x).source,(t.evaluate||x).source].join("|")+"|$","g"),i=0,u="__p+='";n.replace(r,function(t,e,r,a,o){return u+=n.slice(i,o).replace(O,k),i=o+t.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(u+="';\n"+a+"\n__p+='"),t}),u+="';\n",t.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{var a=new Function(t.variable||"obj","_",u)}catch(o){throw o.source=u,o}var s=function(n){return a.call(this,n,p)},l=t.variable||"obj";return s.source="function("+l+"){\n"+u+"}",s},p.chain=function(n){var t=p(n);return t._chain=!0,t};var R=function(n){return this._chain?p(n).chain():n};p.mixin=function(n){p.each(p.functions(n),function(t){var e=p[t]=n[t];p.prototype[t]=function(){var n=[this._wrapped];return u.apply(n,arguments),R.call(this,e.apply(p,n))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];p.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!==n&&"splice"!==n||0!==e.length||delete e[0],R.call(this,e)}}),p.each(["concat","join","slice"],function(n){var t=e[n];p.prototype[n]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}).call(this),function(){function n(){return{keys:Object.keys||function(n){if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("keys() called on a non-object");var t,e=[];for(t in n)n.hasOwnProperty(t)&&(e[e.length]=t);return e},uniqueId:function(n){var t=++a+"";return n?n+t:t},has:function(n,t){return i.call(n,t)},each:function(n,t,e){if(null!=n)if(r&&n.forEach===r)n.forEach(t,e);else if(n.length===+n.length)for(var i=0,u=n.length;u>i;i++)t.call(e,n[i],i,n);else for(var a in n)this.has(n,a)&&t.call(e,n[a],a,n)},once:function(n){var t,e=!1;return function(){return e?t:(e=!0,t=n.apply(this,arguments),n=null,t)}}}}var t,e=this,r=Array.prototype.forEach,i=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a=0,o=n();t={on:function(n,t,e){if(!l(this,"on",n,[t,e])||!t)return this;this._events||(this._events={});var r=this._events[n]||(this._events[n]=[]);return r.push({callback:t,context:e,ctx:e||this}),this},once:function(n,t,e){if(!l(this,"once",n,[t,e])||!t)return this;var r=this,i=o.once(function(){r.off(n,i),t.apply(this,arguments)});return i._callback=t,this.on(n,i,e)},off:function(n,t,e){var r,i,u,a,s,c,f,h;if(!this._events||!l(this,"off",n,[t,e]))return this;if(!n&&!t&&!e)return this._events={},this;for(a=n?[n]:o.keys(this._events),s=0,c=a.length;c>s;s++)if(n=a[s],u=this._events[n]){if(this._events[n]=r=[],t||e)for(f=0,h=u.length;h>f;f++)i=u[f],(t&&t!==i.callback&&t!==i.callback._callback||e&&e!==i.context)&&r.push(i);r.length||delete this._events[n]}return this},trigger:function(n){if(!this._events)return this;var t=u.call(arguments,1);if(!l(this,"trigger",n,t))return this;var e=this._events[n],r=this._events.all;return e&&c(e,t),r&&c(r,arguments),this},stopListening:function(n,t,e){var r=this._listeners;if(!r)return this;var i=!t&&!e;"object"==typeof t&&(e=this),n&&((r={})[n._listenerId]=n);for(var u in r)r[u].off(t,e,this),i&&delete this._listeners[u];return this}};var s=/\s+/,l=function(n,t,e,r){if(!e)return!0;if("object"==typeof e){for(var i in e)n[t].apply(n,[i,e[i]].concat(r));return!1}if(s.test(e)){for(var u=e.split(s),a=0,o=u.length;o>a;a++)n[t].apply(n,[u[a]].concat(r));return!1}return!0},c=function(n,t){var e,r=-1,i=n.length,u=t[0],a=t[1],o=t[2];switch(t.length){case 0:for(;++r<i;)(e=n[r]).callback.call(e.ctx);return;case 1:for(;++r<i;)(e=n[r]).callback.call(e.ctx,u);return;case 2:for(;++r<i;)(e=n[r]).callback.call(e.ctx,u,a);return;case 3:for(;++r<i;)(e=n[r]).callback.call(e.ctx,u,a,o);return;default:for(;++r<i;)(e=n[r]).callback.apply(e.ctx,t)}},f={listenTo:"on",listenToOnce:"once"};o.each(f,function(n,e){t[e]=function(t,e,r){var i=this._listeners||(this._listeners={}),u=t._listenerId||(t._listenerId=o.uniqueId("l"));return i[u]=t,"object"==typeof e&&(r=this),t[n](e,r,this),this}}),t.bind=t.on,t.unbind=t.off,t.mixin=function(n){var t=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return o.each(t,function(t){n[t]=this[t]},this),n},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.BackboneEvents=t):"function"==typeof define?define(function(){return t}):e.BackboneEvents=t}(this),function(){function n(n,t,e){if(o.DEBUG){var r=e?" on the "+e+" channel":"";console.warn(n+r+': "'+t+'"')}}function t(n,t,e,r){if(!e)return!1;var i=[];if("object"==typeof e){for(var u in e)i.push(n[t].apply(n,[u,e[u]].concat(r)));return i}if(s.test(e)){for(var a=e.split(s),o=0,l=a.length;l>o;o++)i.push(n[t].apply(n,[a[o]].concat(r)));return i}return!1}function e(n,t,e){var r=e[0],i=e[1],u=e[2];switch(e.length){case 0:return n.call(t);case 1:return n.call(t,r);case 2:return n.call(t,r,i);case 3:return n.call(t,r,i,u);default:return n.apply(t,e)}}function r(n,t,e,r){var i=n[t];return e&&e!==i.callback&&e!==i.callback._callback||r&&r!==i.context?void 0:(delete n[t],!0)}function i(n,t,e,i){n||(n={});for(var u=t?[t]:_.keys(n),a=!1,o=0,s=u.length;s>o;o++)t=u[o],n[t]&&r(n,t,e,i)&&(a=!0);return a}function u(n){return l[n]||(l[n]=_.partial(o.log,n))}function a(n){return _.isFunction(n)?n:function(){return n}}var o=window.Radio={};o.DEBUG=!1;var s=/\s+/,l={};_.extend(o,{log:function(n,t){var e=_.rest(arguments,2);console.log("["+n+'] "'+t+'"',e)},tuneIn:function(n){var t=o.channel(n);return t._tunedIn=!0,t.on("all",u(n)),this},tuneOut:function(n){var t=o.channel(n);return t._tunedIn=!1,t.off("all",u(n)),delete l[n],this}}),o.Commands={command:function(r){var i=_.rest(arguments);if(t(this,"command",r,i))return this;var u=this.channelName,a=this._commands;if(u&&this._tunedIn&&o.log.apply(this,[u,r].concat(i)),a&&(a[r]||a["default"])){var s=a[r]||a["default"];i=a[r]?i:arguments,e(s.callback,s.context,i)}else n("An unhandled command was fired",r,u);return this},comply:function(e,r,i){return t(this,"comply",e,[r,i])?this:(this._commands||(this._commands={}),this._commands[e]&&n("A command was overwritten",e,this.channelName),this._commands[e]={callback:r,context:i||this},this)},complyOnce:function(n,e,r){if(t(this,"complyOnce",n,[e,r]))return this;var i=this,u=_.once(function(){return i.stopComplying(n),e.apply(this,arguments)});return this.comply(n,u,r)},stopComplying:function(e,r,u){return t(this,"stopComplying",e)?this:(e||r||u?i(this._commands,e,r,u)||n("Attempted to remove the unregistered command",e,this.channelName):delete this._commands,this)}},o.Requests={request:function(r){var i=_.rest(arguments),u=t(this,"request",r,i);if(u)return u;var a=this.channelName,s=this._requests;if(a&&this._tunedIn&&o.log.apply(this,[a,r].concat(i)),s&&(s[r]||s["default"])){var l=s[r]||s["default"];return i=s[r]?i:arguments,e(l.callback,l.context,i)}n("An unhandled request was fired",r,a)},reply:function(e,r,i){return t(this,"reply",e,[r,i])?this:(this._requests||(this._requests={}),this._requests[e]&&n("A request was overwritten",e,this.channelName),this._requests[e]={callback:a(r),context:i||this},this)},replyOnce:function(n,e,r){if(t(this,"replyOnce",n,[e,r]))return this;var i=this,u=_.once(function(){return i.stopReplying(n),a(e).apply(this,arguments)});return this.reply(n,u,r)},stopReplying:function(e,r,u){return t(this,"stopReplying",e)?this:(e||r||u?i(this._requests,e,r,u)||n("Attempted to remove the unregistered request",e,this.channelName):delete this._requests,this)}},o._channels={},o.channel=function(n){if(!n)throw new Error("You must provide a name for the channel.");return o._channels[n]?o._channels[n]:o._channels[n]=new o.Channel(n)},o.Channel=function(n){this.channelName=n},_.extend(o.Channel.prototype,BackboneEvents,o.Commands,o.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopComplying(),this.stopReplying(),this}});var c,f,h=[BackboneEvents,o.Commands,o.Requests];_.each(h,function(n){_.each(n,function(n,t){o[t]=function(n){return f=_.rest(arguments),c=this.channel(n),c[t].apply(c,f)}})})}.apply(this),function(){for(var n,t=function(){},e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=e.length,i=window.console=window.console||{};r--;)n=e[r],i[n]||(i[n]=t)}(),function(n,t,e){"use strict";function r(n,t){var e=a(this,n,t);return e.extend=r,e}function i(n,e){var r=a(this,n,e);return r.extend=null,o.location.is(r.prototype.URL_SPECIFIC)&&(t.Revolution.modules[r.prototype.NAME]=r),r}var u=function(){},a=function(n,t,e){var r;return r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)},_.extend(r,n),u.prototype=n.prototype,r.prototype=new u,t&&_.extend(r.prototype,t),e&&_.extend(r,e),r.prototype.constructor=r,r.__super__=n.prototype,r};_.templateSettings={evaluate:/\{\%(.+?)\%\}/g,interpolate:/\{\{(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};var o=t._R=t.Revolution={INTERNAL_RADIO_CHANNEL:"r9:internal",BINDING_RADIO_CHANNEL:"r9:binding",MAIN_RADIO_CHANNEL:"r9:main",WINDOW_RESIZE_EVENT:"window:resize",WINDOW_SCROLL_EVENT:"window:scroll",WINDOW_LOAD_EVENT:"window:load",VERSION:"0.4.2",Object:{extend:r},modules:[],settings:{window:{resize_enabled:!0,resize_throttle:40,scroll_enabled:!0,scroll_throttle:40},disable_empty_links:!0,bindings:{enabled:!0,keystroke_delay:300}},get:function(n){return this.getModule(n)},getModule:function(n){return this.modules[n]},initialize:function(){this.registerEvents(),this.settings.bindings.enabled&&this.listenBindings(),this.instanciateModules()},location:{is:function(n){if(_.isUndefined(n))return!0;_.isString(n)&&(n=[n]);var e=!1;return _.every(n,function(n){n=n.replace(/\*/g,"(.*)").replace(/\//g,"\\/");var r=new RegExp(n,"g");return!(e=r.test(t.location.pathname))}),e}},registerEvents:function(){this.settings.window.resize_enabled&&s.resize(_.throttle(function(n){var t=Radio.channel(o.INTERNAL_RADIO_CHANNEL);t.trigger(o.WINDOW_RESIZE_EVENT,n)},o.settings.window.resize_throttle)),this.settings.window.scroll_enabled&&s.scroll(_.throttle(function(n){var t=Radio.channel(o.INTERNAL_RADIO_CHANNEL);t.trigger(o.WINDOW_SCROLL_EVENT,n)},o.settings.window.scroll_throttle)),this.settings.disable_empty_links&&l.on("click","a[href='#'], a[href='']",function(n){n.preventDefault()})},listenBindings:function(){_.bindAll(this,"updateBindings"),l.on("click blur paste change","input[data-binding], select[data-binding], textarea[data-binding]",this.updateBindings),l.on("keyup input","input[data-binding], select[data-binding], textarea[data-binding]",_.debounce(this.updateBindings,o.settings.bindings.keystroke_delay))},updateBindings:function(t){var e=n(t.target);if("view"!=e.data("binding-type"))if(1==e.data("binding-update"))e.removeData("binding-update");else{var r=Radio.channel(o.BINDING_RADIO_CHANNEL),i=e.data("binding");r.trigger("binding:"+i,e.val())}},instanciateModules:function(){for(var t in this.modules){var e=new this.modules[t](n);e.initialize(n),this.modules[t]=e}}},s=n(t),l=n(e);o.Base=o.Object.extend({channel:Radio.channel(o.MAIN_RADIO_CHANNEL),$:n,$window:s,constructor:function(){}}),o.DataBinding=o.Object.extend(BackboneEvents.mixin({PROPERTY_UPDATED:"binding:propertyUpdated",binding:Radio.channel(o.BINDING_RADIO_CHANNEL),id:null,__values:null,constructor:function(n,t){this.id=n,this.__values={};for(var e in t)this.addProperty(e,t[e]),this.binding.on("binding:"+this.id+":"+e,_.bind(this.updateModel,this,e)),this.updateView(e,t[e]);return this},addProperty:function(n,t){return null==this.__values[n]&&(this.__values[n]=t,this.__defineSetter__(n,_.bind(function(n,t){this.__values[n]!==t&&(this.__values[n]=t,this.updateView(n,t))},this,n)),this.__defineGetter__(n,_.bind(function(n){return this.__values[n]},this,n))),this},updateView:function(t,e){var r=this.id+":"+t;return n("[data-binding='"+r+"']").each(function(t,r){r=n(r),r.is("input")?(r.data("binding-update",""),r.val(e)):r.text(e)}),n("[data-binding-enabled='"+r+"']").each(function(t,r){r=n(r),r.attr("disabled",!e)}),this},updateModel:function(n,t){if(null!=this.__values[n]){var e=this.__values[n];if(e===t)return;this.__values[n]=t;var r={data:this,property:n,value:t,old_value:e};this.trigger(this.PROPERTY_UPDATED,r).trigger(this.PROPERTY_UPDATED+":"+n,r)}return this},listen:function(n,t){return this.on(n,t),this}})),o.Module=o.Base.extend({__internal:Radio.channel(o.INTERNAL_RADIO_CHANNEL),constructor:function(){_.bindAll(this,"onWindowResize","onWindowScroll","onWindowLoad"),this.__internal.on(o.WINDOW_RESIZE_EVENT,this.onWindowResize),this.__internal.on(o.WINDOW_SCROLL_EVENT,this.onWindowScroll),this.__internal.on(o.WINDOW_LOAD_EVENT,this.onWindowLoad)},listen:function(n,t){return this.channel.on(n,t),this},notify:function(n,t){return this.channel.trigger(n,t),this},onWindowLoad:function(){},onWindowResize:function(){},onWindowScroll:function(){}}),o.Module.extend=i,n(function(){o.initialize()}),s.load(function(n){var t=Radio.channel(o.INTERNAL_RADIO_CHANNEL);t.trigger(o.WINDOW_LOAD_EVENT,n)})}(jQuery,window,document);
